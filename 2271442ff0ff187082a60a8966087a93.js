require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var a=e[n]=new t.Module;r[n][0].call(a.exports,i,a,a.exports)}return e[n].exports}function o(){this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({11:[function(require,module,exports) {
"use strict";function e(e,n){for(var t,r=[],o=[],i=arguments.length;i-- >2;)r.push(arguments[i]);for(;r.length;)if((t=r.pop())&&t.pop)for(i=t.length;i--;)r.push(t[i]);else null!=t&&!0!==t&&!1!==t&&o.push(t);return"function"==typeof e?e(n||{},o):{nodeName:e,attributes:n||{},children:o,key:n&&n.key}}function n(e,n,t,r){var o,i=[],u=r&&r.children[0]||null,l=u&&function e(n,t){return{nodeName:n.nodeName.toLowerCase(),attributes:{},children:t.call(n.childNodes,function(n){return 3===n.nodeType?n.nodeValue:e(n,t)})}}(u,[].map),a=s(e),f=s(n);return d(function e(n,t,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){return"function"==typeof(e=o(e))&&(e=e(p(n,a),r)),e&&e!==(t=p(n,a))&&!e.then&&d(a=h(n,s(t,e),a)),e}}(o,r[o]):e(n.concat(o),t[o]=t[o]||{},r[o]=s(r[o]))}([],a,f)),f;function c(){o=!o;var e=t(a,f);for(r&&!o&&(u=function e(n,t,r,o,u,l){if(o===r);else if(null==r)t=n.insertBefore(N(o,u),t);else if(o.nodeName&&o.nodeName===r.nodeName){!function(e,n,t,r){for(var o in s(n,t))t[o]!==("value"===o||"checked"===o?e[o]:n[o])&&m(e,o,t[o],r,n[o]);t.onupdate&&i.push(function(){t.onupdate(e,n)})}(t,r.attributes,o.attributes,u=u||"svg"===o.nodeName);for(var a=[],f={},c={},d=0;d<r.children.length;d++){a[d]=t.childNodes[d];var h=r.children[d],p=v(h);null!=p&&(f[p]=[a[d],h])}for(var d=0,g=0;g<o.children.length;){var h=r.children[d],y=o.children[g],p=v(h),k=v(y);if(c[p])d++;else if(null==k)null==p&&(e(t,a[d],h,y,u),g++),d++;else{var w=f[k]||[];p===k?(e(t,w[0],w[1],y,u),d++):w[0]?e(t,t.insertBefore(w[0],a[d]),w[1],y,u):e(t,a[d],null,y,u),g++,c[k]=y}}for(;d<r.children.length;){var h=r.children[d];null==v(h)&&b(t,a[d],h),d++}for(var d in f)c[f[d][1].key]||b(t,f[d][0],f[d][1])}else o.nodeName===r.nodeName?t.nodeValue=o:(t=n.insertBefore(N(o,u),l=t),b(n,l,r));return t}(r,u,l,l=e));e=i.pop();)e()}function d(){o||(o=!o,setTimeout(c))}function s(e,n){var t={};for(var r in e)t[r]=e[r];for(var r in n)t[r]=n[r];return t}function h(e,n,t){var r={};return e.length?(r[e[0]]=e.length>1?h(e.slice(1),n,t[e[0]]):n,s(t,r)):n}function p(e,n){for(var t=0;t<e.length;t++)n=n[e[t]];return n}function v(e){return e?e.key:null}function m(e,n,t,r,o){if("key"===n);else if("style"===n)for(var i in s(o,t))e[n][i]=null==t||null==t[i]?"":t[i];else"function"==typeof t||n in e&&!r?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n)}function N(e,n){var t="string"==typeof e||"number"==typeof e?document.createTextNode(e):(n=n||"svg"===e.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):document.createElement(e.nodeName);if(e.attributes){e.attributes.oncreate&&i.push(function(){e.attributes.oncreate(t)});for(var r=0;r<e.children.length;r++)t.appendChild(N(e.children[r],n));for(var o in e.attributes)m(t,o,e.attributes[o],n)}return t}function b(e,n,t,r){function o(){e.removeChild(function e(n,t,r){if(r=t.attributes){for(var o=0;o<t.children.length;o++)e(n.childNodes[o],t.children[o]);r.ondestroy&&r.ondestroy(n)}return n}(n,t))}t.attributes&&(r=t.attributes.onremove)?r(n,o):o()}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.h=e,exports.app=n;
},{}],9:[function(require,module,exports) {
module.exports={name:"nes-tetris-vplayer",version:"0.9.1",description:"A virtual Nintendo NES Tetris (NTSC) player to compete with",main:"index.js",repository:"https://github.com/suitougreentea/nes-tetris-vplayer",author:"suitougreentea",license:"MIT",dependencies:{"babel-core":"^6.26.0","babel-plugin-transform-react-jsx":"^6.24.1","babel-preset-env":"^1.6.1",concurrently:"^3.5.1",hyperapp:"^1.1.2","node-sass":"^4.7.2","parcel-bundler":"^1.5.1"},scripts:{build:"parcel build src/index.html --public-url ./",watch:"parcel watch src/index.html --public-url ./",server:"http-server -c-1 dist/",dev:'concurrent "yarn watch" "yarn server"',clean:"git clean -fdx dist/"},babel:{presets:[["env",{targets:{browsers:["last 2 versions"]}}]],plugins:["transform-react-jsx"]}};
},{}],6:[function(require,module,exports) {
"use strict";var e=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw s}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),t=require("hyperapp"),n=require("../package.json");function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var s="5",o="v"+n.version+" (Build "+(s||"number unknown")+")";console.log(o);var a=-6,c=.3916,l=.4305,h=.47,u=.9,d=1.5,f=[40,100,300,1200],b={name:"Default player",params:{use_drop:0,lines_18_safe:[.4,.1,.1,.4],lines_19_safe:[.4,.2,.15,.25],lines_18_danger:[.6,.2,.1,.1],lines_19_danger:[.7,.15,.1,.05],lines_29:[.7,.15,.1,.05],safe_to_danger:[.02,.05,.4],danger_to_safe:[.05,.02,0],danger_to_death:[.002,.008,1]}},g=null,p=null,P=function(){function e(r){i(this,e),this.useDrop=r.use_drop,this.linesProb18Safe=r.lines_18_safe,this.linesProb18Danger=r.lines_18_danger,this.linesProb19Safe=r.lines_19_safe,this.linesProb19Danger=r.lines_18_danger,this.linesProb29=r.lines_29,this.dangerProb18=r.safe_to_danger[0],this.dangerProb19=r.safe_to_danger[1],this.dangerProb29=r.safe_to_danger[2],this.recoveryProb18=r.danger_to_safe[0],this.recoveryProb19=r.danger_to_safe[1],this.recoveryProb29=r.danger_to_safe[2],this.deathProb18=r.danger_to_death[0],this.deathProb19=r.danger_to_death[1],this.deathProb29=r.danger_to_death[2],this.time=0,this.stack=a,this.score=0,this.lines=0,this.level=18,this.currentStackSpeed=c+this.useDrop*(l-c),this.currentLinesProb=this.linesProb18Safe,this.currentDangerProb=this.dangerProb18,this.currentRecoveryProb=this.recoveryProb18,this.currentDeathProb=this.deathProb18,this.currentLinesExpect=1*this.currentLinesProb[0]+2*this.currentLinesProb[1]+3*this.currentLinesProb[2]+4*this.currentLinesProb[3],this.danger=!1,this.dead=!1,this.logScore=[0],this.logLines=[0]}return r(e,[{key:"step",value:function(){if(!this.dead){if(this.time++,this.danger){if(Math.random()<this.currentRecoveryProb&&(this.danger=!1),Math.random()<this.currentDeathProb)return void(this.dead=!0)}else Math.random()<this.currentDangerProb&&(this.danger=!0);if(18==this.level?(this.currentStackSpeed=c+this.useDrop*(l-c),this.currentLinesProb=this.danger?this.linesProb18Danger:this.linesProb18Safe,this.currentDangerProb=this.dangerProb18,this.currentRecoveryProb=this.recoveryProb18,this.currentDeathProb=this.deathProb18):19<=this.level&&this.level<=28?(this.currentStackSpeed=h,this.currentLinesProb=this.danger?this.linesProb19Danger:this.linesProb19Safe,this.currentDangerProb=this.dangerProb19,this.currentRecoveryProb=this.recoveryProb19,this.currentDeathProb=this.deathProb19):29<=this.level&&(this.currentStackSpeed=u,this.currentLinesProb=this.linesProb29,this.currentDangerProb=this.dangerProb29,this.currentRecoveryProb=this.recoveryProb29,this.currentDeathProb=this.deathProb29),this.currentLinesExpect=1*this.currentLinesProb[0]+2*this.currentLinesProb[1]+3*this.currentLinesProb[2]+4*this.currentLinesProb[3],this.stack+=this.currentStackSpeed,Math.random()<this.currentStackSpeed/this.currentLinesExpect*2){var e=1/(1+Math.exp(-d*this.stack));if(Math.random()<e){for(var r=Math.random(),t=void 0,n=0;n<4;n++){if(r<this.currentLinesProb[n]){t=n+1;break}r-=this.currentLinesProb[n]}this.lines+=t,this.stack-=t,this.lines>=130&&(this.level=19+Math.floor((this.lines-130)/10)),this.score+=f[t-1]*(this.level+1)}}this.logScore.push(this.score),this.logLines.push(this.lines)}}}]),e}(),v=window.location.search.substring(1).split("&").reduce(function(r,t){var n=t.split("="),i=e(n,2),s=i[0],o=i[1];return r[s]=decodeURI(o),r},{}),y=v.debug,_=Math.floor(Number(v.num)),m=v.profile;if(m){var k=new XMLHttpRequest;k.open("GET",m,!0),k.responseType="json",k.onload=function(){4==k.readyState&&(200==k.status?(console.log("Profile successfully loaded:"),console.log(k.response),D.loadProfile(k.response)):(console.error("Failed in loading profile:"),console.error(k.statusText)))},k.onerror=function(){console.error("Failed in loading profile:"),console.error(k.statusText)},k.send(null)}var S={name:"Default player",lines:0,score:0,working:!1,playerState:0},L={dropProfile:function(e){return function(r,t){var n=e.dataTransfer;if(n.items&&1==n.items.length){var i=n.items[0].getAsFile(),s=new FileReader;s.onload=function(e){var r=JSON.parse(e.target.result);console.log("Profile successfully loaded:"),console.log(r),t.loadProfile(r)},s.onerror=function(e){console.error("Failed in loading profile:"),console.error(e)},s.readAsText(i)}}},loadProfile:function(e){return function(r){return b=e,{name:e.name}}},start:function(){return function(e,r){if(!g)return g=new P(b.params),p=setInterval(function(){return r.step()},1e3),{working:!0}}},step:function(){return function(e){return g.step(),{score:g.score,lines:g.lines,working:!g.dead,playerState:g.dead?2:g.danger?1:0}}},skip:function(){return function(e){if(g){for(;!g.dead;)g.step();return{score:g.score,lines:g.lines,working:!1,playerState:2}}}},reset:function(){return function(e){if(g)return g=null,clearInterval(p),{score:0,lines:0,working:!1,playerState:0}}}},w=function(e,r){return(0,t.h)("div",{id:"container",className:e.working?"working":""},(0,t.h)("div",{id:"name"},e.name),(0,t.h)("div",{id:"status",className:1==e.playerState?"danger":2==e.playerState?"dead":""},(0,t.h)("div",{id:"lines"},e.lines," Lines"),(0,t.h)("div",{id:"score"},e.score)))},D=(0,t.app)(S,L,w,document.body);document.addEventListener("dragover",function(e){return e.preventDefault()}),document.addEventListener("drop",function(e){e.preventDefault(),D.dropProfile(e)}),"detailed"==y||"true"==y?document.addEventListener("keypress",function(e){switch(e.key){case"Enter":for(var r="",t=1;t<=_;t++){for(var n=new P(b.params);!n.dead;)n.step();"detailed"==y&&(r+="st"+t+" <- c("+n.logScore.join(", ")+")\nlt"+t+" <- c("+n.logLines.join(", ")+")\n"),"true"==y&&(r+=n.score+"/"+n.lines+"\n")}console.log(r)}}):document.addEventListener("keypress",function(e){switch(e.key){case"Enter":D.start();break;case"s":D.skip();break;case"r":D.reset()}});
},{"hyperapp":11,"../package.json":9}]},{},[6])